<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Sports BD â€“ Login</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
    margin:0;background:#0d0d0d;color:#fff;font-family:Arial;
}
.container{
    width:90%;max-width:420px;margin:40px auto;
    background:#111;padding:20px;border-radius:10px;
}
input{
    width:100%;padding:12px;margin:8px 0;border:none;
    border-radius:5px;background:#222;color:#fff;
}
button{
    width:100%;padding:12px;background:#ff0055;
    border:none;border-radius:6px;color:#fff;font-size:17px;
}
.link{color:#00eaff;text-align:center;margin-top:10px;cursor:pointer;}
</style>
</head>

<body>

<!-- -------- LOGIN PAGE -------- -->
<div id="loginPage" class="container">
    <h2>Login</h2>

    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPass" placeholder="Password">

    <button onclick="loginUser()">Login</button>

    <div class="link" onclick="openRegister()">Create New Account</div>
</div>

<!-- -------- REGISTER PAGE -------- -->
<div id="registerPage" class="container" style="display:none;">
    <h2>Register</h2>

    <input type="text" id="regName" placeholder="Full Name">
    <input type="email" id="regEmail" placeholder="Email">
    <input type="text" id="regPhone" placeholder="Phone">
    <input type="password" id="regPass" placeholder="Password">

    <button onclick="registerUser()">Register</button>

    <div class="link" onclick="openLogin()">Already have an account?</div>
</div>

<script>
// ---------- Firebase Config ----------
const firebaseConfig = {
  apiKey: "AIzaSyBl0PIm4lvZea96Bte3KaKQJvurGE1P8Es",
  authDomain: "post-c7e41.firebaseapp.com",
  databaseURL: "https://post-c7e41-default-rtdb.firebaseio.com/",
  projectId: "post-c7e41",
  messagingSenderId: "758133068153",
  appId: "1:758133068153:web:5513a1de83491c81776084"
};

firebase.initializeApp(firebaseConfig);

// ---------- Page Toggle ----------
function openRegister(){
    document.getElementById("loginPage").style.display="none";
    document.getElementById("registerPage").style.display="block";
}
function openLogin(){
    document.getElementById("registerPage").style.display="none";
    document.getElementById("loginPage").style.display="block";
}

// ---------- Register User ----------
function registerUser(){
    let name = document.getElementById("regName").value;
    let email = document.getElementById("regEmail").value;
    let phone = document.getElementById("regPhone").value;
    let pass = document.getElementById("regPass").value;

    if(name=="" || email=="" || phone=="" || pass=="")
        return alert("All fields required!");

    firebase.auth().createUserWithEmailAndPassword(email, pass)
    .then(res => {
        let uid = res.user.uid;

        firebase.database().ref("users").child(uid).set({
            name: name,
            email: email,
            phone: phone,
            balance: 0,
            uid: uid
        }).then(() => {
            alert("Registration Successful!");
            window.location.href = "home.html";
        });

    })
    .catch(err => alert(err.message));
}

// ---------- Login User ----------
function loginUser(){
    let email = document.getElementById("loginEmail").value;
    let pass = document.getElementById("loginPass").value;

    firebase.auth().signInWithEmailAndPassword(email, pass)
    .then(res => {
        let uid = res.user.uid;

        localStorage.setItem("uid", uid);

        alert("Login Successful!");
        window.location.href = "home.html";
    })
    .catch(err => alert(err.message));
}
</script>

</body>
</html>